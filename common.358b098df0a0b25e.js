"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[76],{94562:(v,o,n)=>{n.d(o,{c:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"Position/")}deleteTarget(e){return this.http.delete(this.baseUrl+e)}GetPositionsByDepartment(e){return this.http.get(this.baseUrl+"GetPositionsByDepartment/"+e)}GetHeadDropDown(){return this.http.get(this.baseUrl+"GetHeadDropDown")}GetDropDown(){return this.http.get(this.baseUrl+"GetDropDown")}GetManagementChainAsync(e){return this.http.get(this.baseUrl+"GetManagementChainAsync/"+e)}delete(e){return this.http.delete(`${this.baseUrl}SoftDelete/${e}`,this.httpOptions)}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},95883:(v,o,n)=>{n.d(o,{O:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"Branch/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},91020:(v,o,n)=>{n.d(o,{e:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"CancelReason/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},35419:(v,o,n)=>{n.d(o,{S:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"Region/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},75312:(v,o,n)=>{n.d(o,{Y:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"ReturnReason/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},84205:(v,o,n)=>{n.d(o,{t:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"ClientGroup/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},61351:(v,o,n)=>{n.d(o,{F:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"ClientCollection/")}print(e){return this.http.get(this.baseUrl+"Print/"+e,{responseType:"blob"})}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},34578:(v,o,n)=>{n.d(o,{N:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"PositionName/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},79284:(v,o,n)=>{n.d(o,{G:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"WorkTime/")}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},45943:(v,o,n)=>{n.d(o,{L:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"ProductOffer/")}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}GetActiveOffer(){return this.http.get(this.baseUrl+"GetActiveOffer")}checkItemOffer(e,r){return this.checkOffers(e,r)}checkOffers(e,r){const d=r.filter(_=>{const p=_.productServicesX.map(m=>m.id),O=e.items.filter(m=>p.includes(m.itemId)&&!m.isFree).reduce((m,u)=>m+u.quantity,0);if(6===_.offerType){const m=_.productOfferQuantities.filter(u=>O>=u.quantityX);if(m.length){const u=m.reduce((D,E)=>E.quantityX>D.quantityX?E:D);return _.quantityX=u.quantityX,_.quantityY=u.quantityY,!0}return!1}return O>=_.quantityX});return 0===d.length?(e.itemsOffers=[],e.items=e.items.filter(_=>!_.isFree),e):(e.itemsOffers=[],e.offerNames=[],d.forEach(_=>{[1,6].includes(_.offerType)&&this.checkOfferXToY(e,_)}),e)}checkOfferXToY(e,r){const d=e.items.reduce((p,h)=>p+(r.productServicesX.some(m=>m.id===h.itemId&&!h.isFree)?h.quantity:0),0);if(r.quantityY=this.getBestQuantity(d,r),e.items.some(p=>r.productServicesX.some(h=>h.id===p.itemId))&&d>=r.quantityX){r.productServicesY.forEach(h=>{h.isSelected=!1,h.quantityY=r.quantityY}),e.offerNames.push({id:r.id,title:r.title,isSelected:!1,count:r.productServicesY.length});const p=6===r.offerType?this.resetQuantityX(r.quantityY,r.productServicesY):r.productServicesY;e.itemsOffers.push(...p)}else e.itemsOffers=[];return this.updateLimit(e)}updateLimit(e){return e.items.filter(r=>r.isFree).forEach(r=>{const d=e.itemsOffers.find(_=>_.id===r.itemId);d&&(r.quantityY=d.quantityY,r.quantity=Math.min(r.quantity,d.quantityY))}),e.items=this.removeExceededOfferItems(e.items),e}removeExceededOfferItems(e){const r={};e.forEach(_=>{const p=_.offerId;r[p]||(r[p]={total:0,max:_.quantityY}),r[p].total+=_.quantity});const d=Object.entries(r).filter(([_,p])=>p.total>p.max).map(([_])=>+_);return e.filter(_=>!d.includes(_.offerId))}resetQuantityX(e,r){return r.map(d=>({...d,quantityY:e}))}getBestQuantity(e,r){let d=e,_=0;const p=[...r.productOfferQuantities].sort((h,O)=>O.quantityX-h.quantityX);for(let h of p){const O=Math.floor(d/h.quantityX);O>0&&(_+=O*h.quantityY,d-=O*h.quantityX)}return _}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},63022:(v,o,n)=>{n.d(o,{U:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"Invoice/")}SaveInvoice(e){return this.http.post(this.baseUrl+"SaveInvoice",e)}GetOrderServiceAndPayment(e){return this.http.get(this.baseUrl+`GetOrderServiceAndPayment/${e}`)}GetByCode(e){return this.http.get(this.baseUrl+`GetByCode/${e}`)}SendInvoice(e){return this.http.post(this.baseUrl+`SendInvoice/${e}`,{})}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},70072:(v,o,n)=>{n.d(o,{A:()=>s});var t=n(84412),c=n(67569),a=n(45312),i=n(54438),l=n(21626);let s=(()=>{class f extends c.d{constructor(r){super(r,a.c.apiUrl+"OfferOrder/"),this.checkValidationSource=new t.t(!0),this.checkValidation=this.checkValidationSource.asObservable(),this.GetOrderCountSource=new t.t(!0),this.GetOrderCount=this.GetOrderCountSource.asObservable(),this.removeServiceQ=new t.t(0),this.removeService=this.removeServiceQ.asObservable(),this.removeServiceOfferQ=new t.t(0),this.removeServiceOffer=this.removeServiceOfferQ.asObservable(),this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.salesOrderForm={itemsOffers:[],id:null,clientLocationId:0,clientVisitDate:new Date,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,serviceCategoryCode:0,isCustomerDataValid:!1},this.requesturl=a.c.apiUrl+"salesRequest/"}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(r){return this.http.put(this.baseUrl+"ChangeStatus/",r)}UpdateQuantity(r){return this.http.put(this.baseUrl+"UpdateQuantity",r)}updateTruck(r){return this.http.put(this.baseUrl+"updateTruck",r)}GetTrucks(r){return this.http.post(this.baseUrl+"GetTrucks/",r)}CancelOfferOrder(r){return this.http.post(this.baseUrl+"CancelOfferOrder",r)}GetOfferOrderCount(){return this.http.get(this.baseUrl+"OfferOrderCount")}GetOfferOrderStoreCount(){return this.http.get(this.baseUrl+"GetOfferOrderStoreCount")}GetAssignSalesOrder(){return this.http.get(this.baseUrl+"GetAssignSalesOrder")}GetOrderDetail(r){return this.http.get(this.baseUrl+"GetOrderDetail/"+r)}RequestChangeQuantity(r){return this.http.post(this.baseUrl+"RequestChangeQuantity/",r)}GetOrderStore(r){return this.http.post(this.baseUrl+"GetOrderStore/",r)}PrintSalesOrder(r){return this.http.get(this.baseUrl+"PrintSalesOrder/"+r,{responseType:"blob"})}PrintStoreReport(r){return this.http.get(this.baseUrl+"PrintStoreReport/"+r,{responseType:"blob"})}registerRequestSales(r){return this.http.post(this.requesturl+"register",r)}static{this.\u0275fac=function(d){return new(d||f)(i.KVO(l.Qq))}}static{this.\u0275prov=i.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},86865:(v,o,n)=>{n.d(o,{B:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{getTrunckStatus(){return[{id:20,name:"ArriveStore"},{id:30,name:"GoClient"},{id:40,name:"ArriveClient"},{id:50,name:"DeliveryClient"}]}constructor(e){super(e,c.c.apiUrl+"OrderReceived/")}GetOrderAssignTrunk(e){return this.http.post(this.baseUrl+"OrderAssignTrunk",e)}changeStatus(e){return this.http.post(this.baseUrl+"changeStatus",e)}PrintOrderReceived(e){return this.http.get(this.baseUrl+"PrintOrderReceived/"+e,{responseType:"blob"})}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},12128:(v,o,n)=>{n.d(o,{z:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"PaymentType/")}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(e){return this.http.put(this.baseUrl+"ChangeStatus/",e)}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},96357:(v,o,n)=>{n.d(o,{Q:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"InvoiceMaster/")}register(e){return this.http.post(this.baseUrl+"AddPaymentToInvoice",e)}edit(e){return this.http.post(this.baseUrl+"EditPayment",e)}softDelete(e){return this.http.delete(this.baseUrl+`SoftDelete/${e}`)}finishOrder(e){return this.http.post(this.baseUrl+"finishOrder",e)}getInvoiceAttachments(e){return this.http.get(this.baseUrl+"GetInvoiceAttachments/"+e)}GetInvoiceAttachmentsByOrder(e){return this.http.get(this.baseUrl+"GetInvoiceAttachmentsByOrder/"+e)}print(e){return this.http.get(this.baseUrl+"print/"+e,{responseType:"blob"})}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},34618:(v,o,n)=>{n.d(o,{S:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"Unit/")}ToDelete(e){return this.http.delete(`${this.baseUrl}${e}`)}ToEdit(e,r){return this.http.put(this.baseUrl+"Edit/"+e,r)}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},69433:(v,o,n)=>{n.d(o,{a:()=>l});var t=n(67569),c=n(45312),a=n(54438),i=n(21626);let l=(()=>{class s extends t.d{constructor(e){super(e,c.c.apiUrl+"Store/")}ToDelete(e){return this.http.delete(`${this.baseUrl}${e}`)}ToEdit(e,r){return this.http.put(this.baseUrl+"Edit/"+e,r)}static{this.\u0275fac=function(r){return new(r||s)(a.KVO(i.Qq))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},90094:(v,o,n)=>{n.d(o,{_:()=>a});var t=n(45312),c=n(54438);let a=(()=>{class i{constructor(){this.key=t.c.cryptKey}encode(s){return s}decode(s){return s}static{this.\u0275fac=function(f){return new(f||i)}}static{this.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},26366:(v,o,n)=>{n.d(o,{x:()=>m});var t=n(54438),c=n(75922),a=n(60177),i=n(8147);function l(u,D){1&u&&(t.j41(0,"p",18),t.nrm(1,"span",19),t.k0s())}function s(u,D){if(1&u&&(t.j41(0,"span",20),t.nrm(1,"i",21),t.EFF(2),t.k0s()),2&u){const E=t.XpG();t.R7$(2),t.SpI(" ",E.client.clientName,"")}}function f(u,D){1&u&&(t.j41(0,"p",18),t.nrm(1,"span",19),t.k0s())}function e(u,D){if(1&u&&(t.j41(0,"span",22),t.nrm(1,"i",21),t.EFF(2),t.k0s()),2&u){const E=t.XpG();t.R7$(2),t.SpI(" ",E.client.creditLimit,"")}}function r(u,D){1&u&&(t.j41(0,"p",18),t.nrm(1,"span",23),t.k0s())}function d(u,D){if(1&u&&(t.j41(0,"span",24),t.nrm(1,"i",21),t.EFF(2),t.nI1(3,"date"),t.k0s()),2&u){const E=t.XpG();t.R7$(2),t.SpI("",t.i5U(3,1,E.client.lastTransactionDate,"yyyy-MM-dd ")," ")}}function _(u,D){1&u&&(t.j41(0,"p",18),t.nrm(1,"span",25),t.k0s())}function p(u,D){if(1&u&&(t.j41(0,"span",26),t.nrm(1,"i",21),t.EFF(2),t.k0s()),2&u){const E=t.XpG();t.R7$(2),t.Lme(" ",E.client.clientQuantity," - ",E.client.clientInvoiceCost," ")}}function h(u,D){1&u&&(t.j41(0,"p",18),t.nrm(1,"span",27),t.k0s())}function O(u,D){if(1&u&&(t.j41(0,"span",28),t.nrm(1,"i",21),t.EFF(2),t.k0s()),2&u){const E=t.XpG();t.R7$(2),t.SpI("",E.client.totalDebt," ")}}let m=(()=>{class u{constructor(E){this.clientService=E,this.dismiss=new t.bkB,this.clientId=0,this.client={},this.showData=!1,this.objectKeys=Object.keys}ngOnInit(){this.getClientSummary()}getClientSummary(){0!=this.clientId&&this.clientService.GetClientSummary(this.clientId).subscribe(E=>{this.showData=!0,this.client=E.data})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(M){return new(M||u)(t.rXU(c.X))}}static{this.\u0275cmp=t.VBU({type:u,selectors:[["client-summary"]],inputs:{clientId:"clientId"},outputs:{dismiss:"dismiss"},decls:28,vars:10,consts:[[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","justify-content-between","my-2"],["translate","client.client.clientName",1,"col-12","col-md-4"],[1,"col-12","col-md-8"],["class","card-text placeholder-glow",4,"ngIf"],["class","badge badge-label bg-primary fs-5",4,"ngIf"],[1,"row","justify-content-between"],["translate","client.client.CreditLimit",1,"col-12","col-md-4"],["class","badge badge-label bg-warning fs-5",4,"ngIf"],[1,"row","my-2","justify-content-between"],["translate","client.client.lastTransactionDate",1,"col-12","col-md-4"],["class","badge badge-label bg-info fs-5",4,"ngIf"],["translate","client.client.numberInvoiceQuantity",1,"col-12","col-md-4"],["class","badge badge-label bg-success fs-5",4,"ngIf"],["translate","client.client.totalDebt",1,"col-12","col-md-4"],["class","badge badge-label bg-danger fs-5",4,"ngIf"],[1,"card-text","placeholder-glow"],[1,"placeholder","col-12","bg-primary"],[1,"badge","badge-label","bg-primary","fs-5"],[1,"mdi","mdi-circle-medium"],[1,"badge","badge-label","bg-warning","fs-5"],[1,"placeholder","col-12","bg-info"],[1,"badge","badge-label","bg-info","fs-5"],[1,"placeholder","col-12","bg-success"],[1,"badge","badge-label","bg-success","fs-5"],[1,"placeholder","col-12","bg-danger"],[1,"badge","badge-label","bg-danger","fs-5"]],template:function(M,P){1&M&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return P.dismissFn()}),t.k0s()(),t.j41(2,"div",2)(3,"div",3),t.nrm(4,"div",4),t.j41(5,"div",5),t.DNE(6,l,2,0,"p",6)(7,s,3,1,"span",7),t.k0s()(),t.j41(8,"div",8),t.nrm(9,"div",9),t.j41(10,"div",5),t.DNE(11,f,2,0,"p",6)(12,e,3,1,"span",10),t.k0s()(),t.j41(13,"div",11),t.nrm(14,"div",12),t.j41(15,"div",5),t.DNE(16,r,2,0,"p",6)(17,d,4,4,"span",13),t.k0s()(),t.j41(18,"div",8),t.nrm(19,"div",14),t.j41(20,"div",5),t.DNE(21,_,2,0,"p",6)(22,p,3,2,"span",15),t.k0s()(),t.j41(23,"div",11),t.nrm(24,"div",16),t.j41(25,"div",5),t.DNE(26,h,2,0,"p",6)(27,O,3,1,"span",17),t.k0s()()()),2&M&&(t.R7$(6),t.Y8G("ngIf",!P.showData),t.R7$(),t.Y8G("ngIf",P.showData),t.R7$(4),t.Y8G("ngIf",!P.showData),t.R7$(),t.Y8G("ngIf",P.showData),t.R7$(4),t.Y8G("ngIf",!P.showData),t.R7$(),t.Y8G("ngIf",P.showData),t.R7$(4),t.Y8G("ngIf",!P.showData),t.R7$(),t.Y8G("ngIf",P.showData),t.R7$(4),t.Y8G("ngIf",!P.showData),t.R7$(),t.Y8G("ngIf",P.showData))},dependencies:[a.bT,i.Mm,a.vh],encapsulation:2})}}return u})()},83229:(v,o,n)=>{n.d(o,{s:()=>l});var t=n(39974),c=n(85343),a=n(54360),i=n(58750);function l(s){return(0,t.N)((f,e)=>{let r=!1,d=null,_=null;const p=()=>{if(_?.unsubscribe(),_=null,r){r=!1;const h=d;d=null,e.next(h)}};f.subscribe((0,a._)(e,h=>{_?.unsubscribe(),r=!0,d=h,_=(0,a._)(e,p,c.l),(0,i.Tg)(s(h)).subscribe(_)},()=>{p(),e.complete()},void 0,()=>{d=_=null}))})}}}]);